(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),s=a(38),r=a.n(s),l=a(8),o=a(4),i=(a(70),a(5)),u=(a(71),a(42),a(72),a(1)),d=function(){return Object(u.jsxs)("div",{className:"home-navbar",children:[Object(u.jsxs)("div",{className:"left-items",children:[Object(u.jsxs)("h1",{className:"left-title",children:[Object(u.jsx)("span",{className:"title-color-change",children:"skid"}),".rocks"]}),Object(u.jsx)("a",{href:"https://github.com/ulnkos/skidcordprod",className:"left-item",children:"Features"}),Object(u.jsx)("a",{href:"https://github.com/ulnkos/skidcordprod",className:"left-item",children:"GitHub"}),Object(u.jsx)("a",{href:"https://github.com/ulnkos/skidcordprod",className:"left-item",children:"About"})]}),Object(u.jsx)("div",{className:"right-items",children:Object(u.jsx)(l.b,{to:"/login",children:Object(u.jsx)("button",{className:"login-button",children:"Login"})})})]})},j=function(){var e=["Blasting NBA Youngboy on OBlock, been in the game since '02.","P2P Encryption.","14.2 Million Bots Connected.","Pushin' P.","Central Cee > OBlock.","OBlock smoking on Tooka.","Build using BQN.","You wouldn't steal a car.","Gunna & Future - pushin P (feat. Young Thug) [Official Video]","I can rhyme Orange and Banana. Bornana.","Miria Botnet < Brixton Botnet.","NOTDS Multitool."],t=Math.floor(Math.random()*e.length),a=Math.floor(Math.random()*e.length),c=e[t],n=(e=e.filter((function(e){return e!==c})))[a];return e=e.filter((function(e){return e!==n})),Object(u.jsxs)("div",{className:"home-body",children:[Object(u.jsx)(d,{}),Object(u.jsxs)("div",{className:"home-header",children:[Object(u.jsx)("h1",{className:"home-header-title",children:c}),Object(u.jsx)("span",{className:"home-header-desc",children:n}),Object(u.jsxs)("div",{className:"home-buttons-container",children:[Object(u.jsx)("a",{href:"https://github.com/ulnkos/skidcordprod",children:Object(u.jsx)("button",{className:"home-github-main",children:"Check out our GitHub!"})}),Object(u.jsx)(l.b,{to:"/skid/@me",children:Object(u.jsx)("button",{className:"home-login-main",children:"Open skidrocks in your browser"})})]})]})]})},b=a(3),m=(a(74),a(6)),h=a.n(m),O=a(13),p=a(18),f=a.n(p),x="https://skid.rocks";var v=function(e){return f.a.post(x+"/api/app/changePfp",e,{headers:{"x-auth-token":localStorage.getItem("token")}})},N=function(e){return e?f.a.get(x+"/api/app/getserver?sid=".concat(e),{headers:{"x-auth-token":localStorage.getItem("token")}}):null},g=function(e,t){return f.a.get(x+"/api/app/getchannel?sid=".concat(t,"&cid=").concat(e),{headers:{"x-auth-token":localStorage.getItem("token")}})},y=function(e){return f.a.post(x+"/api/app/addserver",{serverName:e},{headers:{"x-auth-token":localStorage.getItem("token")}})},k=function(e,t){return f.a.post(x+"/api/app/addcategory",{categoryName:e,sId:t},{headers:{"x-auth-token":localStorage.getItem("token")}})},S=function(e,t,a){return f.a.post(x+"/api/app/addchannel",{sId:e,categoryId:t,channelName:a},{headers:{"x-auth-token":localStorage.getItem("token")}})},E=function(){var e=Object(o.c)((function(e){return e.auth.data})),t=Object(i.f)(),a=Object(c.useState)(""),n=Object(b.a)(a,2),s=n[0],r=n[1],d=Object(c.useState)(""),j=Object(b.a)(d,2),m=j[0],p=j[1],v=Object(o.b)();return Object(c.useEffect)((function(){e.userId&&t("/skid/@me")}),[e.userId,t]),Object(u.jsx)("form",{className:"login-body",onSubmit:function(e){var t;e.preventDefault(),v((t={username:s,password:m},function(){var e=Object(O.a)(h.a.mark((function e(a){var c,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s=t,f.a.post(x+"/api/login",s);case 3:c=e.sent,n=c.data,a({type:"LOGIN",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}var s}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:Object(u.jsxs)("div",{className:"modal-container background-primary",children:[Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsxs)("div",{className:"modal-form-header",children:[Object(u.jsx)("span",{className:"modal-header-title",children:"Welcome Back!"}),Object(u.jsx)("small",{className:"modal-header-desc",children:"We're so glad to see you again!"})]}),Object(u.jsxs)("div",{className:"modal-form-input-container",children:[Object(u.jsx)("span",{className:"modal-form-input-header",children:"USERNAME"}),Object(u.jsx)("input",{type:"text",className:"modal-form-input",value:s,onChange:function(e){return r(e.target.value)},placeholder:""})]}),Object(u.jsxs)("div",{className:"modal-form-input-container",children:[Object(u.jsx)("span",{className:"modal-form-input-header",children:"PASSWORD"}),Object(u.jsx)("input",{type:"password",className:"modal-form-input",value:m,onChange:function(e){return p(e.target.value)},placeholder:""}),Object(u.jsx)("span",{className:"login-register",children:Object(u.jsx)(l.b,{to:"/recover",className:"register-button",children:"Forgot your password?"})})]})]}),Object(u.jsxs)("div",{className:"options-container background-secondary",children:[Object(u.jsxs)("span",{className:"login-register",children:["Need an account? ",Object(u.jsx)(l.b,{to:"/register",className:"register-button",children:"Register"})]}),Object(u.jsx)("button",{type:"submit",className:"submit-button",children:"Login"})]})]})})},C=function(){return Object(u.jsx)("div",{className:"body",children:Object(u.jsx)(E,{})})},I=(a(94),function(){var e=Object(o.c)((function(e){return e.auth.data})),t=Object(i.f)(),a=Object(c.useState)(""),n=Object(b.a)(a,2),s=n[0],r=n[1],d=Object(c.useState)(""),j=Object(b.a)(d,2),m=j[0],p=j[1],v=Object(c.useState)(""),N=Object(b.a)(v,2),g=N[0],y=N[1],k=Object(o.b)(),S=function(){return s.length<1||m.length<1||g.length<1?w("Invalid form."):s.includes(" ")||s.includes("#")||s.includes('"')||s.includes("'")||s.includes("&")||s.includes("@")||s.includes("~")||s.includes("/")||s.includes(",")||s.includes(">")?w("Username must not contain special characters including: # ' \" & @ ~ / > < "):m.includes(" ")?w("Password cannot include spaces."):s.length<5?w("Username must be larger than 4 characters."):s.length>15?w("Username must be less than 15 characters."):m!==g?w("Passwords do not match."):void k((e={username:s,password:m},function(){var t=Object(O.a)(h.a.mark((function t(a){var c,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s=e,f.a.post(x+"/api/register",s);case 3:c=t.sent,n=c.data,a({type:"REGISTER",payload:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var s}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()));var e};Object(c.useEffect)((function(){e.userId&&t("/skid/@me")}),[e.userId,t]);var E=Object(c.useState)(""),C=Object(b.a)(E,2),I=C[0],w=C[1];return Object(u.jsx)("form",{className:"login-body",onSubmit:function(e){e.preventDefault(),S()},children:Object(u.jsxs)("div",{className:"modal-container background-primary",children:[Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsxs)("div",{className:"modal-form-header",children:[Object(u.jsx)("span",{className:"modal-header-title",children:"Create an account"}),Object(u.jsx)("small",{className:"modal-err-desc",children:I})]}),Object(u.jsxs)("div",{className:"modal-form-input-container",children:[Object(u.jsx)("span",{className:"modal-form-input-header",children:"USERNAME"}),Object(u.jsx)("input",{type:"text",className:"modal-form-input",value:s,onChange:function(e){return r(e.target.value)},placeholder:""})]}),Object(u.jsxs)("div",{className:"modal-form-input-container",children:[Object(u.jsx)("span",{className:"modal-form-input-header",children:"PASSWORD"}),Object(u.jsx)("input",{type:"password",className:"modal-form-input",value:m,onChange:function(e){return p(e.target.value)},placeholder:""})]}),Object(u.jsxs)("div",{className:"modal-form-input-container",children:[Object(u.jsx)("span",{className:"modal-form-input-header",children:"CONFIRM PASSWORD"}),Object(u.jsx)("input",{type:"password",className:"modal-form-input",value:g,onChange:function(e){return y(e.target.value)},placeholder:""})]})]}),Object(u.jsxs)("div",{className:"options-container background-secondary",children:[Object(u.jsxs)("span",{className:"login-register",children:["Already have an account? ",Object(u.jsx)(l.b,{to:"/login",className:"register-button",children:"Login"})]}),Object(u.jsx)("button",{type:"submit",className:"submit-button",children:"Register"})]})]})})}),w=(a(95),function(e){return function(){var t=Object(O.a)(h.a.mark((function t(a){var c,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,N(e);case 5:if(c=t.sent,n=c.data){t.next=9;break}return t.abrupt("return");case 9:a({type:"GET_CURRENT_SERVER",payload:n}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()}),R=function(e,t,a){return function(){var c=Object(O.a)(h.a.mark((function c(n){var s,r;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,l=e,o=t,i=a,f.a.post(x+"/api/app/addmessage",{serverId:o,channelId:l,messageContent:i},{headers:{"x-auth-token":localStorage.getItem("token")}});case 3:if(s=c.sent,r=s.data){c.next=7;break}return c.abrupt("return");case 7:n({type:"SEND_MESSAGE",payload:r}),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(0),console.log(c.t0);case 13:case"end":return c.stop()}var l,o,i}),c,null,[[0,10]])})));return function(e){return c.apply(this,arguments)}}()},A=a(59),_=n.a.createContext(),M=function(){return Object(c.useContext)(_)},T=function(e){var t=e.children,a=Object(c.useState)(),n=Object(b.a)(a,2),s=n[0],r=n[1],l=Object(o.c)((function(e){return e.auth}));return Object(c.useEffect)((function(){var e=Object(A.a)("https://skid.rocks",{auth:{token:l.token||null}});return r(e),function(){return e.close()}}),[l]),Object(u.jsx)(_.Provider,{value:s,children:t})},D=(a(101),function(e){var t=Object(c.useState)(""),a=Object(b.a)(t,2),n=a[0],s=a[1],r=Object(o.b)();return Object(u.jsx)("form",{className:"modal-underbody",onSubmit:function(t){t.preventDefault(),r(function(e){return function(){var t=Object(O.a)(h.a.mark((function t(a){var c,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y(e);case 3:if(c=t.sent,n=c.data){t.next=7;break}return t.abrupt("return");case 7:a({type:"ADD_SERVER",payload:n}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(n)),s(""),e.close(!1)},children:Object(u.jsxs)("div",{className:"modal-container background-primary",children:[Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsxs)("div",{className:"modal-form-header",children:[Object(u.jsx)("span",{className:"modal-header-title",children:"Create server"}),Object(u.jsx)("small",{className:"modal-header-desc",children:"Give your new server a personality with a name. You can always change it later."})]}),Object(u.jsxs)("div",{className:"modal-form-input-container",children:[Object(u.jsx)("span",{className:"modal-form-input-header",children:"SERVER NAME"}),Object(u.jsx)("input",{type:"text",className:"modal-form-input",value:n,onChange:function(e){return s(e.target.value)},placeholder:"genericuser's server"})]})]}),Object(u.jsxs)("div",{className:"options-container background-secondary",children:[Object(u.jsx)("button",{className:"cancel-button",onClick:function(){return e.close(!1)},children:"Cancel"}),Object(u.jsx)("button",{type:"submit",className:"submit-button",children:"Create server"})]})]})})}),G=function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),a=t[0],n=t[1],s=Object(o.c)((function(e){return e.servers.all})),r=Object(o.b)(),d=M(),j=Object(i.g)().sId;return Object(u.jsxs)(u.Fragment,{children:[a&&Object(u.jsx)(D,{close:n}),Object(u.jsxs)("div",{className:"navbar background-tertiary",children:[Object(u.jsxs)(l.b,{to:"/skid/@me",children:[Object(u.jsx)("div",{className:"selected-noti ".concat(j?null:"active")}),Object(u.jsx)("div",{className:"navbar-server hover-skid background-primary ".concat(j?null:"home-selected"),children:Object(u.jsx)("span",{className:"tool",children:"Home"})})]}),s[0]&&Object(u.jsx)("div",{className:"divider background-primary"}),s.map((function(e,t){return Object(u.jsxs)(l.b,{to:"/skid/".concat(e._id,"/").concat(e.allCategorys[0].allChannels[0]._id),children:[Object(u.jsx)("div",{className:"selected-noti ".concat(e._id===j?"active":null)}),Object(u.jsx)("div",{className:"navbar-server hover-server background-primary ".concat(e._id===j?"server-selected":null),onClick:function(){r(w()),d.emit("joinChannel",e.allCategorys[0].allChannels[0]._id)},children:Object(u.jsx)("span",{className:"tool",children:e.serverName})})]},t)})),Object(u.jsx)("div",{className:"divider background-primary"}),Object(u.jsx)("div",{className:"navbar-server hover-server background-primary",onClick:function(){return n(!0)},children:Object(u.jsx)("span",{className:"tool",children:"Add a server"})})]})]})},L=a(26),U=(a(102),a(103),function(e){var t=Object(c.useState)(""),a=Object(b.a)(t,2),n=a[0],s=a[1],r=Object(o.b)(),l=Object(i.g)().sId;return Object(u.jsx)("form",{className:"modal-underbody",onSubmit:function(t){t.preventDefault(),r(function(e,t){return function(){var a=Object(O.a)(h.a.mark((function a(c){var n,s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k(e,t);case 3:if(n=a.sent,s=n.data){a.next=7;break}return a.abrupt("return");case 7:c({type:"ADD_CATEGORY",payload:s}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(n,l)),s(""),e.close(!1)},children:Object(u.jsxs)("div",{className:"modal-container background-primary",children:[Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("div",{className:"modal-form-header",children:Object(u.jsx)("span",{className:"modal-header-title",children:"Create category"})}),Object(u.jsxs)("div",{className:"modal-form-input-container",children:[Object(u.jsx)("span",{className:"modal-form-input-header",children:"CATEGORY NAME"}),Object(u.jsx)("input",{type:"text",className:"modal-form-input",value:n,onChange:function(e){return s(e.target.value)},placeholder:"New category"})]})]}),Object(u.jsxs)("div",{className:"options-container background-secondary",children:[Object(u.jsx)("button",{onClick:function(){return e.close(!1)},className:"cancel-button",children:"Cancel"}),Object(u.jsx)("button",{type:"submit",className:"submit-button",children:"Create category"})]})]})})}),P=a(56),B=(a(104),function(e){var t=Object(c.useState)(""),a=Object(b.a)(t,2),n=a[0],s=a[1],r=Object(o.b)(),l=Object(i.g)().sId;return Object(u.jsx)("form",{className:"modal-underbody",onSubmit:function(t){t.preventDefault(),r(function(e,t,a){return function(){var c=Object(O.a)(h.a.mark((function c(n){var s,r;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,S(e,t,a);case 3:if(s=c.sent,r=s.data){c.next=7;break}return c.abrupt("return");case 7:n({type:"ADD_CHANNEL",payload:r}),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(0),console.log(c.t0);case 13:case"end":return c.stop()}}),c,null,[[0,10]])})));return function(e){return c.apply(this,arguments)}}()}(l,e.categoryId,n)),s(""),e.close([!1,""])},children:Object(u.jsxs)("div",{className:"modal-container background-primary",children:[Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsxs)("div",{className:"modal-form-header",children:[Object(u.jsx)("span",{className:"modal-header-title",children:"Create text channel"}),Object(u.jsxs)("small",{className:"modal-header-desc",children:["in ",e.categoryId]})]}),Object(u.jsxs)("div",{className:"modal-select-container",children:[Object(u.jsx)("span",{className:"modal-select-header",children:"CHANNEL TYPE"}),Object(u.jsxs)("div",{className:"modal-type-container",children:[Object(u.jsxs)("div",{className:"modal-select-type modal-selected-type",children:[Object(u.jsx)("div",{className:"select-check-wrapper",children:Object(u.jsx)("div",{className:"select-check"})}),Object(u.jsx)(L.c,{className:"select-type-icon"}),Object(u.jsxs)("div",{className:"select-type-info",children:[Object(u.jsx)("span",{className:"select-type-name",children:"Text Channel"}),Object(u.jsx)("small",{className:"select-type-desc",children:"Post images, GIFs, opinions and puns"})]})]}),Object(u.jsxs)("div",{className:"modal-select-type modal-select-hover",children:[Object(u.jsx)("div",{className:"unselect-check-wrapper",children:Object(u.jsx)("div",{className:"unselect-check"})}),Object(u.jsx)(P.a,{className:"select-type-icon"}),Object(u.jsxs)("div",{className:"select-type-info",children:[Object(u.jsx)("span",{className:"select-type-name",children:"Voice Channel"}),Object(u.jsx)("small",{className:"select-type-desc",children:"Hang out with voice, video and screen sharing"})]})]})]})]}),Object(u.jsxs)("div",{className:"modal-form-input-container",children:[Object(u.jsx)("span",{className:"modal-form-input-header",children:"CHANNEL NAME"}),Object(u.jsx)("input",{type:"text",className:"modal-form-input",value:n,onChange:function(e){s(e.target.value)},placeholder:"new-channel"})]})]}),Object(u.jsxs)("div",{className:"options-container background-secondary",children:[Object(u.jsx)("button",{onClick:function(){return e.close([!1,""])},className:"cancel-button",children:"Cancel"}),Object(u.jsx)("button",{type:"submit",className:"submit-button",children:"Create channel"})]})]})})}),F=a(27),H=a(57),V=(a(105),function(e){var t=Object(o.b)(),a=Object(c.useState)(""),n=Object(b.a)(a,2),s=n[0],r=n[1],l=Object(o.c)((function(e){return e.auth}));Object(c.useEffect)((function(){r(l.data.pfpUrl)}),[l]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"settings ".concat(e.class),children:[Object(u.jsx)("div",{className:"close",onClick:function(){return e.close(!1)},children:Object(u.jsx)(F.a,{size:"18"})}),Object(u.jsx)("section",{className:"tabs",children:Object(u.jsxs)("ul",{className:"tab-buttons-container",children:[Object(u.jsxs)("div",{className:"tab-section",children:[Object(u.jsx)("span",{className:"font-display section-title",children:"USER SETTINGS"}),Object(u.jsx)("div",{className:"section-items",children:Object(u.jsx)("button",{className:"section-button text-channel-colour selected",children:"My Account"})})]}),Object(u.jsx)("div",{className:"divider-options"}),Object(u.jsx)("form",{className:"tab-section",onSubmit:function(){t(function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:"LOGOUT",payload:null})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:Object(u.jsx)("button",{type:"submit",className:"section-button logout text-channel-colour",children:"Logout"})})]})}),Object(u.jsxs)("section",{className:"options",children:[Object(u.jsx)("div",{className:"header-title-option",children:"My Account"}),Object(u.jsxs)("form",{className:"option",onSubmit:function(e){var a;e.preventDefault(),t((a={url:s,jwt:l.token},function(){var e=Object(O.a)(h.a.mark((function e(t){var c,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(a);case 3:c=e.sent,n=c.data,t({type:"PROFILEPICTURE",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(u.jsx)("span",{className:"option-title",children:"Profile Picture URL"}),Object(u.jsx)("input",{type:"url",className:"modal-form-input-o",pattern:"https://.*",value:s,onChange:function(e){return r(e.target.value)},placeholder:""}),Object(u.jsx)("button",{type:"submit",className:"submit-button-save",children:"Save"})]})]})]})})}),Y=function(e){var t=Object(c.useState)(!1),a=Object(b.a)(t,2),n=a[0],s=a[1],r=Object(c.useState)(!1),l=Object(b.a)(r,2),i=l[0],d=l[1],j=Object(o.c)((function(e){return e.auth.data}));return Object(c.useEffect)((function(){console.log(j)}),[j]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(V,{close:s,class:"".concat(e.className," ").concat(n&&"active")}),Object(u.jsxs)("section",{className:"user-info background-secondary-alt ".concat(e.className),children:[Object(u.jsxs)("div",{className:"profile-container",children:[Object(u.jsx)("img",{className:"profile-image",src:j.pfpUrl,alt:""}),Object(u.jsxs)("div",{className:"profile-name-container",children:[Object(u.jsx)("span",{className:"profile-name",children:j.username}),Object(u.jsx)("small",{className:"profile-tag",children:j.userId})]})]}),Object(u.jsxs)("div",{className:"buttons-container",children:[Object(u.jsxs)("div",{className:"button-wrapper",onClick:function(){return d(!i)},children:[Object(u.jsx)("span",{className:"button-tool",children:i?"Unmute":"Mute"}),i?Object(u.jsx)(F.c,{className:"button"}):Object(u.jsx)(F.b,{className:"button"})]}),Object(u.jsxs)("div",{className:"button-wrapper",onClick:function(){return s(!0)},children:[Object(u.jsx)("span",{className:"button-tool",children:"Settings"}),Object(u.jsx)(H.a,{className:"button"})]})]})]})]})},J=function(e){var t=Object(c.useState)(!0),a=Object(b.a)(t,2),n=a[0],s=a[1],r=Object(i.g)(),o=r.sId,d=r.cId;return Object(u.jsxs)("div",{className:"category",children:[Object(u.jsxs)("div",{className:"category-header text-channel-colour-group",children:[n?Object(u.jsx)(L.a,{className:"category-chevron colour-group-item",onClick:function(){return s(!n)}}):Object(u.jsx)(L.b,{className:"category-chevron colour-group-item",onClick:function(){return s(!n)}}),Object(u.jsx)("span",{className:"category-header-text font-display colour-group-item",onClick:function(){return s(!n)},children:e.category.categoryName.toUpperCase()}),Object(u.jsx)(L.d,{className:"category-add colour-group-item",onClick:function(){return e.setShowChannelModal([!0,e.category._id])}})]}),Object(u.jsx)("div",{className:"children",children:e.category.allChannels.map((function(e,t){return n&&Object(u.jsx)(l.b,{to:"/skid/".concat(o,"/").concat(e._id),children:Object(u.jsxs)("div",{className:"channel text-channel-colour ".concat(d===e._id?"selected":""),children:[Object(u.jsx)(L.c,{className:"channel-hashtag text-channel-colour"}),Object(u.jsx)("span",{className:"channel-title font-primary",children:e.channelName})]},t)})}))})]},e.category._id)},W=function(){var e=Object(c.useState)(!1),t=Object(b.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(!1),r=Object(b.a)(s,2),l=r[0],d=r[1],j=Object(c.useState)([!1,""]),m=Object(b.a)(j,2),p=m[0],v=m[1],N=Object(c.useState)(JSON.parse(localStorage.getItem("showReminder"))),g=Object(b.a)(N,1)[0],y=Object(i.g)().sId,k=Object(o.c)((function(e){return e.servers.current})),S=Object(i.f)(),E=Object(o.b)();Object(c.useEffect)((function(){E(w(y))}),[E,y]);var C=Object(c.useCallback)((function(){return a?n(!1):null}),[a]);Object(c.useEffect)((function(){return document.addEventListener("click",C),function(){return document.removeEventListener("click",C)}}));var I=function(){E(function(e){return function(){var t=Object(O.a)(h.a.mark((function t(a){var c,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,s=e,f.a.post(x+"/api/app/deleteserver",{serverId:s},{headers:{"x-auth-token":localStorage.getItem("token")}});case 5:if(c=t.sent,n=c.data){t.next=9;break}return t.abrupt("return");case 9:a({type:"DELETE_SERVER",payload:n}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.log(t.t0);case 15:case"end":return t.stop()}var s}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()}(y)),S("/skid/@me")};return k._id?Object(u.jsxs)(u.Fragment,{children:[l&&Object(u.jsx)(U,{close:d}),p[0]&&Object(u.jsx)(B,{categoryId:p[1],close:v}),Object(u.jsx)(Y,{}),Object(u.jsx)("nav",{className:"channel-bar background-secondary ".concat(g&&"rHeight"),children:Object(u.jsxs)("div",{className:"channel-bar-items",children:[Object(u.jsxs)("section",{className:"server-name",onClick:function(){return n(!0)},children:[Object(u.jsx)("h2",{className:"server-name-header font-primary",children:k.serverName}),Object(u.jsx)(L.a,{className:"server-name-chevron"}),a&&Object(u.jsxs)("ul",{className:"context-menu",children:[Object(u.jsx)("li",{className:"context-menu-item blue",onClick:function(){return d(!0)},children:Object(u.jsx)("button",{children:"Create Category"})}),Object(u.jsx)("li",{className:"context-menu-item red",onClick:function(){return I()},children:Object(u.jsx)("button",{children:"Delete Server"})})]})]}),Object(u.jsx)("div",{className:"channels",children:k.allCategorys.map((function(e,t){return Object(u.jsx)(J,{i:t,category:e,setShowChannelModal:v})}))})]})})]}):null},z=(a(106),function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)([]),r=Object(b.a)(s,2),l=r[0],d=r[1],j=Object(o.c)((function(e){return e.servers.channel})),m=M(),p=Object(o.c)((function(e){return e.auth.data})),v=Object(c.useState)(JSON.parse(localStorage.getItem("showReminder"))),N=Object(b.a)(v,1)[0],y=Object(i.g)(),k=y.sId,S=y.cId,E=Object(o.b)();Object(c.useEffect)((function(){E(function(e,t){return function(){var a=Object(O.a)(h.a.mark((function a(c){var n,s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g(e,t);case 3:if(n=a.sent,s=n.data){a.next=7;break}return a.abrupt("return");case 7:c({type:"GET_CURRENT_CHANNEL",payload:s}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(S,k))}),[E,S,k]),Object(c.useEffect)((function(){d(j.allMessages)}),[j,d]),Object(c.useEffect)((function(){m&&(m.on("loadMessage",(function(e){e.messageUserId!==p.userId&&e.messageChannel===S&&E(function(e){return function(){var t=Object(O.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"GET_MESSAGE",payload:e})}catch(c){console.log(c)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))})),m.off("loadMessages"))}),[m,E,p,S]),Object(c.useEffect)((function(){m&&m.emit("joinChannel",S)}),[m,S]);var C=function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),E(R(S,k,a)),e.t0=m,e.next=5,c=S,s=k,r=a,f.a.post(x+"/api/app/pseudomessage",{serverId:s,channelId:c,messageContent:r},{headers:{"x-auth-token":localStorage.getItem("token")}});case 5:e.t1=e.sent,e.t0.emit.call(e.t0,"sendMessage",e.t1),n("");case 8:case"end":return e.stop()}var c,s,r}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"user-content background-primary ".concat(N&&"rHeight"),children:[Object(u.jsx)("div",{className:"channel-name background-primary",children:Object(u.jsx)("span",{className:"channel-info-name",children:j.channelName})}),Object(u.jsxs)("div",{className:"chat",children:[Object(u.jsx)("div",{className:"chat-bar-container",children:Object(u.jsx)("form",{className:"chat-bar background-primary-alt",onSubmit:C,children:Object(u.jsx)("input",{type:"text",placeholder:"Message #general",value:a,onChange:function(e){return n(e.target.value)},className:"chat-bar-area"})})}),Object(u.jsx)("div",{className:"chat-container",children:l.map((function(e,t){return e.isSmall?Object(u.jsx)("div",{className:"chat-item-small",children:Object(u.jsx)("div",{className:"chat-item-content",children:Object(u.jsx)("span",{className:"chat-item-text",children:e.messageContent})})}):Object(u.jsxs)("div",{className:"chat-item",children:[Object(u.jsx)("img",{className:"chat-item-picture",src:e.profilePicture,alt:""}),Object(u.jsxs)("div",{className:"chat-item-content",children:[Object(u.jsxs)("div",{className:"chat-user-info",children:[Object(u.jsx)("span",{className:"chat-item-name",children:e.messageOwner}),Object(u.jsx)("span",{className:"chat-item-date",children:new Date(e.messageCreation).toLocaleDateString()})]}),Object(u.jsx)("span",{className:"chat-item-text",children:e.messageContent})]})]},t)}))})]}),Object(u.jsxs)("div",{className:"member-list background-secondary",children:[Object(u.jsxs)("div",{className:"member-list-category",children:[Object(u.jsx)("span",{className:"member-list-name text-channel-colour",children:"ONLINE"}),Object(u.jsx)("div",{className:"members",children:Object(u.jsxs)("div",{className:"member",children:[Object(u.jsx)("div",{className:"member-profile-image"}),Object(u.jsx)("span",{className:"member-name text-primary",children:"genericuser"})]})})]}),Object(u.jsxs)("div",{className:"member-list-category",children:[Object(u.jsx)("span",{className:"member-list-name text-channel-colour",children:"OFFLINE"}),Object(u.jsx)("div",{className:"members",children:Object(u.jsxs)("div",{className:"member",children:[Object(u.jsx)("div",{className:"member-profile-image"}),Object(u.jsx)("span",{className:"member-name text-muted",children:"Taylor Peters"})]})})]})]})]})}),Q=(a(107),function(){var e=Object(c.useState)(JSON.parse(localStorage.getItem("showReminder"))),t=Object(b.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){null===localStorage.getItem("showReminder")&&localStorage.setItem("showReminder",!0)}),[]),Object(u.jsx)(u.Fragment,{children:a&&Object(u.jsxs)("div",{className:"reminder",children:[Object(u.jsxs)("div",{className:"reminder-title",children:["Have you heard of shire sounds? Check out their amazing radio station!",Object(u.jsx)("a",{href:"https://shiresoundsradio.co.uk/",className:"reminder-button",children:"click here!"})]}),Object(u.jsx)(F.a,{className:"reminder-close",onClick:function(){return n(!1),void localStorage.setItem("showReminder",!1)}})]})})}),q=function(){var e=Object(o.c)((function(e){return e.auth.data})),t=Object(i.f)();return Object(c.useEffect)((function(){e.userId||t("/login")}),[e.userId,t]),Object(u.jsxs)("div",{className:"flex h-screen w-screen overflow-hidden",children:[Object(u.jsx)(G,{}),Object(u.jsxs)("div",{className:"reminder-container",children:[Object(u.jsx)(Q,{}),Object(u.jsxs)("div",{className:"flex h-full w-full transition-none user-context-navbar-container",children:[Object(u.jsx)(W,{}),Object(u.jsx)(z,{})]})]})]})},K=function(){var e=Object(o.c)((function(e){return e.auth.data})),t=Object(i.f)();return Object(c.useEffect)((function(){e.userId||t("/login")}),[e.userId,t]),Object(u.jsxs)("div",{className:"flex h-screen w-screen overflow-hidden",children:[Object(u.jsx)(G,{}),Object(u.jsx)(Y,{className:"ml-[72px]"}),Object(u.jsxs)("div",{className:"reminder-container",children:[Object(u.jsx)(Q,{}),Object(u.jsxs)("div",{className:"flex transition-none user-context-navbar-container",children:[Object(u.jsx)("nav",{className:"channel-bar background-secondary"}),Object(u.jsx)("div",{className:"user-content background-primary flex flex-grow"})]})]})]})},X=function(){var e=Object(i.f)();return Object(c.useEffect)((function(){e("/skid/@me")}),[e]),null},Z=function(){var e=Object(o.c)((function(e){return e.auth.data})),t=Object(o.b)();return Object(c.useEffect)((function(){t(function(){var e=Object(O.a)(h.a.mark((function e(t){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get(x+"/api/app/getservers",{headers:{"x-auth-token":localStorage.getItem("token")}});case 3:a=e.sent,c=a.data,t({type:"GET_ALL_SERVERS",payload:c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[t,e]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{path:"/",element:Object(u.jsx)(j,{})}),Object(u.jsx)(i.a,{path:"/login",element:Object(u.jsx)(C,{})}),Object(u.jsx)(i.a,{path:"/register",element:Object(u.jsx)(I,{})}),Object(u.jsx)(i.a,{path:"/skid/:sId/:cId",element:Object(u.jsx)(q,{})}),Object(u.jsx)(i.a,{path:"/skid/@me",element:Object(u.jsx)(K,{})}),Object(u.jsx)(i.a,{path:"*",element:Object(u.jsx)(X,{})})]})})},$=a(31),ee=a(7),te=a(32),ae=function(){var e=localStorage.getItem("token");try{return{token:localStorage.getItem("token"),data:{username:Object(te.a)(e).data.username||"",userId:Object(te.a)(e).data.userId||"",userRole:Object(te.a)(e).data.userRole||"",pfpUrl:Object(te.a)(e).data.profileUrl||""}}}catch(t){return{token:localStorage.getItem("token"),data:{username:"",userId:"",userRole:"",pfpUrl:""}}}},ce=function(e){var t=e.payload.jwt,a=Object(te.a)(t);return console.log(a),localStorage.setItem("token",t),Object(ee.a)(Object(ee.a)(Object(ee.a)({},ae()),a),{},{token:t})},ne=a(33),se=Object($.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return ce(t);case"LOGOUT":return localStorage.setItem("token",null),Object(ee.a)({},ae());case"REGISTER":case"PROFILEPICTURE":return ce(t);default:return e}},servers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{all:[],current:{},channel:{allMessages:[],channelName:""}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_SERVERS":return Object(ee.a)(Object(ee.a)({},e),{},{all:Object(ne.a)(t.payload)});case"GET_CURRENT_SERVER":return Object(ee.a)(Object(ee.a)({},e),{},{current:t.payload});case"GET_CURRENT_CHANNEL":return Object(ee.a)(Object(ee.a)({},e),{},{channel:t.payload});case"ADD_SERVER":return Object(ee.a)(Object(ee.a)({},e),{},{all:[t.payload].concat(Object(ne.a)(e.all))});case"GET_MESSAGE":case"SEND_MESSAGE":return Object(ee.a)(Object(ee.a)({},e),{},{channel:{allMessages:[t.payload].concat(Object(ne.a)(e.channel.allMessages))}});case"ADD_CATEGORY":return Object(ee.a)(Object(ee.a)({},e),{},{current:Object(ee.a)(Object(ee.a)({},e.current),{},{allCategorys:[].concat(Object(ne.a)(e.current.allCategorys),[t.payload])})});case"ADD_CHANNEL":return Object(ee.a)(Object(ee.a)({},e),{},{current:t.payload});default:return e}}}),re=a(58),le=Object($.d)(se,Object($.c)(Object($.a)(re.a)));r.a.render(Object(u.jsx)(l.a,{children:Object(u.jsx)(o.a,{store:le,children:Object(u.jsx)(T,{children:Object(u.jsx)(Z,{})})})}),document.getElementById("root"))},42:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){}},[[108,1,2]]]);
//# sourceMappingURL=main.e69b8ef7.chunk.js.map